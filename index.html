<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ì–æ—Ä–æ–¥—Å—å–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  background-color: #121212;
  color: #ffffff;
  transition: background-color 0.3s, color 0.3s;
}

body.light-theme {
  background-color: #ffffff;
  color: #121212;
}

.loader-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: #FFD500;
  color: black;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 1000;
}

.loader-logo {
  width: 260px;
  max-width: 80%;
  height: auto;
  margin-bottom: 24px;
  transition: transform 0.3s ease-in-out;
}

.loader {
  margin-top: 24px;
  border: 4px solid #f3f3f3;
  border-radius: 50%;
  border-top: 4px solid #555;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.app {
  display: none;
  flex-direction: column;
  height: 100vh;
}

.map-container iframe {
  border: none;
  width: 100%;
  height: 250px;
}

.section {
  padding: 16px;
  background-color: #1e1e1e;
  border-top: 1px solid #333;
}

body.light-theme .section {
  background-color: #f4f4f4;
  color: #121212;
}

input, textarea, select {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: 1px solid #444;
  background-color: #2a2a2a;
  color: #fff;
  font-size: 14px;
}

body.light-theme input, body.light-theme textarea, body.light-theme select {
  background-color: #ffffff;
  color: #121212;
  border-color: #ccc;
}

.btn {
  width: 100%;
  padding: 12px;
  margin-top: 16px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(145deg, #9b59b6, #8e44ad);
  color: white;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  transition: all 0.2s ease-in-out;
}

.btn:hover {
  background: linear-gradient(145deg, #8e44ad, #732d91);
  transform: translateY(-2px);
}

.bottom-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background-color: #1e1e1e;
  border-top: 1px solid #333;
  position: fixed;
  bottom: 0;
  width: 100%;
  z-index: 999;
}

body.light-theme .bottom-nav {
  background-color: #f4f4f4;
}

.nav-item {
  flex: 1;
  text-align: center;
  color: #ccc;
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: color 0.3s ease, transform 0.3s ease;
}

.nav-item:hover {
  color: #ffffff;
  transform: translateY(-2px);
}

.nav-item.active {
  color: #fff;
  font-weight: bold;
}

.nav-center-btn {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background-color: #8e44ad;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  top: -28px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  z-index: 100;
  transition: transform 0.6s ease-in-out;
}

.nav-center-btn:hover {
  transform: rotate(360deg);
}

.plus-btn {
  color: white;
  font-size: 32px;
  font-weight: bold;
}

.profile, .tariffs, .edit-profile-section {
  display: none;
  padding: 16px;
}

.profile-circle img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  margin: auto;
  display: block;
}

.phone-number {
  margin-top: 10px;
  font-size: 16px;
  text-align: center;
}

.profile-actions div, .tariff-item {
  padding: 10px 0;
  border-bottom: 1px solid #333;
  cursor: pointer;
  color: #bb86fc;
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1001;
}

.modal-content {
  background-color: #1e1e1e;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  width: 80%;
  max-width: 300px;
}

.modal-content h3 {
  margin-bottom: 16px;
}

.history {
  padding: 16px;
  background-color: #1e1e1e;
  color: #ffffff;
}

body.light-theme .history {
  background-color: #f4f4f4;
  color: #121212;
}

.history h3 {
  margin-bottom: 12px;
}

.history ul {
  list-style: none;
  padding: 0;
}

.history li {
  padding: 10px;
  border-bottom: 1px solid #333;
}

.continue-btn {
  position: relative;
  margin: 16px 0;
  z-index: 1;
}

.input-group {
  margin-bottom: 16px;
}

.input-group label {
  font-size: 14px;
  color: #ccc;
  margin-bottom: 6px;
  display: block;
}

.input-with-icon {
  position: relative;
}

.input-with-icon input,
.input-with-icon textarea {
  width: 100%;
  padding: 12px 36px 12px 12px;
  border-radius: 10px;
  border: 1px solid #333;
  background-color: #2a2a2a;
  color: #fff;
  font-size: 14px;
}

body.light-theme .input-with-icon input,
body.light-theme .input-with-icon textarea {
  background-color: #ffffff;
  color: #121212;
  border-color: #ccc;
}

.input-with-icon .icon {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #bb86fc;
  font-size: 18px;
}

#payment-section {
  background-color: #2a2a2a;
  border-radius: 15px;
  padding: 30px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
  transition: all 0.3s ease;
}

#payment-section h3 {
  font-size: 26px;
  font-weight: bold;
  color: #ffffff;
  text-align: center;
}

#payment-section p {
  font-size: 18px;
  color: #ffffff;
  margin-top: 12px;
  text-align: center;
}

.input-group {
  margin-top: 25px;
}

.input-group label {
  font-size: 16px;
  color: #fff;
  display: block;
}

.input-group div {
  display: flex;
  justify-content: space-between;
  margin-top: 10px;
}

.input-group input[type="radio"] {
  margin-right: 10px;
}

.btn {
  padding: 15px 30px;
  background: linear-gradient(145deg, #9b59b6, #8e44ad);
  border-radius: 12px;
  color: white;
  font-weight: bold;
  border: none;
  cursor: pointer;
  transition: background 0.3s ease, transform 0.3s ease;
}

.btn:hover {
  transform: scale(1.05);
  background: linear-gradient(145deg, #8e44ad, #732d91);
}

.input-group div span {
  color: #bbb;
  font-size: 14px;
}

  </style>
</head>
<body>
  <div class="loader-screen" id="loader">
    <img src="../img/logotip.jpg" alt="Logo" class="loader-logo"/>
    <div>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    <div class="loader"></div>
  </div>
 <div class="section" id="payment-section" style="display: none;">
  <h3 style="color: #FFFFFF;">–û–ø–ª–∞—Ç–∞</h3>
  <p style="font-size: 18px; color: #FFFFFF;">–í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: <strong>80 –≥—Ä–Ω</strong></p>

<div class="input-group" style="margin-top: 20px;">
  <label style="color: #FFFFFF; font-size: 16px;">–í–∏–±–µ—Ä—ñ—Ç—å —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏:</label>
  <div style="display: flex; align-items: center; margin-top: 10px;">
    <label style="color: #FFFFFF; font-size: 16px;">
      <input type="radio" name="payment-method" value="cash" checked /> –ì–æ—Ç—ñ–≤–∫–∞
    </label>
    <label style="color: #FFFFFF; font-size: 16px;">
      <input type="radio" name="payment-method" value="card" /> –ö–∞—Ä—Ç–∫–∞
    </label>
  </div>
</div>


  <div class="section" style="text-align: center; margin-top: 20px;">
    <button class="btn" id="confirm-payment-btn" style="background-color: #8e44ad; padding: 14px 28px; font-size: 18px; width: 60%; cursor: pointer;">
      –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –æ–ø–ª–∞—Ç—É
    </button>
  </div>
</div>


  <div class="app" id="app">
    <div id="order-section">
      <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?..." allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="section">
        <div class="input-group">
          <label for="delivery-address">–ö—É–¥–∏ –¥–æ—Å—Ç–∞–≤–∏—Ç–∏?</label>
          <div class="input-with-icon">
            <input type="text" id="delivery-address" placeholder="–≤—É–ª. –ö–∏—ó–≤—Å—å–∫–∞, 20" />
            <span class="icon">üìç</span>
          </div>
        </div>

        <div class="input-group">
          <label for="order-desc">–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏–¥–±–∞—Ç–∏?</label>
          <div class="input-with-icon">
            <textarea id="order-desc" placeholder="–û–ø–∏—à—ñ—Ç—å, —â–æ —Å–∞–º–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫—É–ø–∏—Ç–∏, –¥–µ —ñ —è–∫..."></textarea>
            <span class="icon">üìù</span>
          </div>
        </div>

        <button class="btn continue-btn" id="continue-btn">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
      </div>
    </div>

    <div class="tariffs" id="tariffs">
      <h3>–¢–∞—Ä–∏—Ñ–∏ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É</h3>
      <div class="tariff-item">–ú—ñ—Å—Ç–æ ‚Äî 75 –≥—Ä–Ω</div>
      <div class="tariff-item">–û–∫–æ–ª–∏—Ü—ñ ‚Äî 120 –≥—Ä–Ω</div>
      <div class="tariff-item">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è ‚Äî 10 –≥—Ä–Ω/10 —Ö–≤</div>
    </div>

    <div class="profile" id="profile">
      <div class="profile-circle"><img id="user-photo" src="" alt="User Photo"></div>
      <div class="phone-number" id="user-name"></div>
      <div class="profile-actions">
      <div class="profile-actions">
        <div id="edit-profile"><img src="img/edit.png"/> –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</div>
        <div id="toggle-theme"><img src="img/theme.png"/> –ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É</div>
        <div id="view-history"><img src="img/school.png"/> –¢–∞—Ä–∏—Ñ</div>
        <div id="contact-support"><img src="img/support.png"/> –ó–≤'—è–∑–æ–∫ –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é</div>
        <h1>–°–æ—Ü—ñ–∞–ª—å–Ω—ñ –º–µ—Ä–µ–∂—ñ</h1>
        <div id="telegram"><img src="img/telegram.png"/> –ù–∞—à –∫–∞–Ω–∞–ª –≤ Telegram</div>
        <div id="instagram"><img src="img/instagram.png"/> –ù–∞—à–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –≤ Instagram</div>
        <h2>–ú–æ—ó –∞–¥—Ä–µ—Å–∏</h2>
        <div id="adres"><img src="img/plus.png"/> –î–æ–¥–∞—Ç–∏ –∞–¥—Ä–µ—Å—É</div>
      </div>

      </div>
    </div>

    <div class="edit-profile-section" id="edit-profile-section">
      <input type="text" id="new-name" placeholder="–Ü–º'—è" />
      <button class="btn" id="save-profile">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>

    <div class="history" id="history">
      <h3>–Ü—Å—Ç–æ—Ä—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
      <ul id="history-list"></ul>
    </div>

    <div class="bottom-nav">
      <div class="nav-item" onclick="showSection('history', this)">
        <div class="nav-icon">üóíÔ∏è</div>
        <div class="nav-label">–Ü—Å—Ç–æ—Ä—ñ—è</div>
      </div>
      <div class="nav-center-btn" onclick="showSection('order-section', this)">
        <div class="plus-btn">+</div>
      </div>
      <div class="nav-item" onclick="showSection('profile', this)">
        <div class="nav-icon">üë§</div>
        <div class="nav-label">–ü—Ä–æ—Ñ—ñ–ª—å</div>
      </div>
    </div>
  </div>

  <div class="modal" id="modal" style="display: none;">
    <div class="modal-content">
      <h3>–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∞—Ä–∏—Ñ</h3>
      <select>
        <option value="city">–ú—ñ—Å—Ç–æ ‚Äî 75 –≥—Ä–Ω</option>
        <option value="suburb">–û–∫–æ–ª–∏—Ü—ñ ‚Äî 120 –≥—Ä–Ω</option>
      </select>
      <button class="btn" onclick="closeModal()">OK</button>
    </div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    window.addEventListener("load", () => {
      document.getElementById("loader").style.display = "none";
      document.getElementById("app").style.display = "flex";
      showSection("order-section");
    });

    function showSection(id, element) {
      const sections = ["order-section", "tariffs", "profile", "edit-profile-section", "history", "payment-section"];
      sections.forEach(s => {
        const el = document.getElementById(s);
        if (el) el.style.display = "none";
      });

      const targetSection = document.getElementById(id);
      if (targetSection) targetSection.style.display = "block";

      const navItems = document.querySelectorAll(".nav-item");
      navItems.forEach(el => el.classList.remove("active"));
      if (element?.classList.contains("nav-item")) {
        element.classList.add("active");
      }
    }


    document.getElementById("continue-btn").addEventListener("click", () => {
  // –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–¥—ñ–ª –æ–ø–ª–∞—Ç–∏, –∫–æ–ª–∏ –Ω–∞—Ç–∏—Å–∫–∞—î—Ç—å—Å—è '–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏'
  showSection("payment-section");
});

document.getElementById("confirm-payment-btn").addEventListener("click", () => {
  const address = document.getElementById("delivery-address").value;
  const description = document.getElementById("order-desc").value;
  const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;

  // –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
  const orderText = `–ê–¥—Ä–µ—Å–∞: ${address} ‚Äî ${description} ‚Äî –û–ø–ª–∞—Ç–∞: ${paymentMethod === 'cash' ? '–ì–æ—Ç—ñ–≤–∫–∞' : '–ö–∞—Ä—Ç–∫–∞'}`;

  // –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ —ñ—Å—Ç–æ—Ä—ñ—é
  addToHistory(orderText);

  // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —ñ –æ—á–∏—Å—Ç–∏—Ç–∏ –ø–æ–ª—è
  alert("–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ!");
  document.getElementById("delivery-address").value = "";
  document.getElementById("order-desc").value = "";

  // –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–¥—ñ–ª —ñ—Å—Ç–æ—Ä—ñ—ó –ø—ñ—Å–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏
  showSection("history");
});

function addToHistory(order) {
  const historyList = document.getElementById("history-list");
  const listItem = document.createElement("li");
  listItem.textContent = order;
  historyList.appendChild(listItem);
}

function showSection(id) {
  const sections = ["order-section", "tariffs", "profile", "edit-profile-section", "history", "payment-section"];
  sections.forEach(s => {
    const el = document.getElementById(s);
    if (el) el.style.display = "none";
  });

  const targetSection = document.getElementById(id);
  if (targetSection) targetSection.style.display = "block";
}

    function addToHistory(order) {
      const historyList = document.getElementById("history-list");
      const listItem = document.createElement("li");
      listItem.textContent = order;
      historyList.appendChild(listItem);
    }

    document.getElementById("toggle-theme").addEventListener("click", () => {
      document.body.classList.toggle("light-theme");
    });

    document.getElementById("edit-profile").addEventListener("click", () => {
      showSection("edit-profile-section");
    });

    document.getElementById("save-profile").addEventListener("click", () => {
      const newName = document.getElementById("new-name").value;
      if (newName.trim()) {
        document.getElementById("user-name").textContent = newName;
        showSection("profile");
      }
    });

    if (tg.initDataUnsafe?.user) {
      const user = tg.initDataUnsafe.user;
      document.getElementById("user-name").textContent = user.first_name + (user.last_name ? ' ' + user.last_name : '');
      document.getElementById("user-photo").src = user.photo_url || "placeholder.jpg";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }
    document.getElementById("view-history").addEventListener("click", () => {
      showSection("tariffs");
    });

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }
    // –ü—Ä–∏–∫–ª–∞–¥ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∞–±–æ –¥–æ –±–æ—Ç–∞
function sendUserDataToBot(user) {
    const url = 'https://yourserver.com/save-user-data';  // URL –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
    const data = {
        user_id: user.id,
        first_name: user.first_name,
        last_name: user.last_name,
        photo_url: user.photo_url
    };

    fetch(url, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => console.log('User data saved:', data))
    .catch(error => console.error('Error saving user data:', error));
}

// –í–∏–∫–ª–∏–∫–∞–π—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é, –ø–µ—Ä–µ–¥–∞—é—á–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
if (tg.initDataUnsafe?.user) {
    const user = tg.initDataUnsafe.user;
    sendUserDataToBot(user);  // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –¥–∞–Ω—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
}

  </script>
</body>
</html>
